<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>cPanel ‚Ä¢ AC KANBAN</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="cPanel.css" />

  <!-- Firebase SDKs (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <div class="app">
    <header>
      <h1>AC Kanban</h1>
      <div class="spacer"></div>
      <div class="toolbar">
        <div class="filters">
          <select id="filterTipo">
            <option value="">Tipo: Todos</option>
          </select>
          <select id="filterTurno">
            <option value="">Turno: 1 y 2</option>
            <option value="1">Turno 1</option>
            <option value="2">Turno 2</option>
          </select>
          <button id="btnExport" class="ghost">Exportar CSV</button>
          <button id="btnSettings" title="Ajustes" class="ghost">‚öôÔ∏è Ajustes</button>
        </div>
      </div>
    </header>

    <main class="board" id="board">
      <section class="column" data-col="diagnostico">
        <h2>Diagn√≥stico</h2>
        <div class="grid" id="col-diagnostico"></div>
      </section>
      <section class="column" data-col="reparacion">
        <h2>Reparaci√≥n</h2>
        <div class="grid" id="col-reparacion"></div>
      </section>
      <section class="column" data-col="listo">
        <h2>Listo</h2>
        <div class="grid" id="col-listo"></div>
      </section>
    </main>

    <button class="fab" id="fab">+</button>
    <div class="archive-bar" id="archiveBar">üóÑÔ∏è Arrastra aqu√≠ para archivar</div>

    <!-- Drawer de edici√≥n / creaci√≥n -->
    <aside class="drawer" id="drawer">
      <header><h1 style="font-size:15px; margin:0;">Editar tarjeta</h1></header>
      <div class="content">
        <div class="row">
          <div>
            <label>N√∫mero de OT</label>
            <input id="f-ot" placeholder="0001" />
          </div>
          <div>
            <label>Producto</label>
            <input id="f-producto" list="datalistProductos" placeholder="Notebook" />
            <datalist id="datalistProductos"></datalist>
          </div>
        </div>
        <div class="row">
          <div>
            <label>Marca</label>
            <input id="f-marca" placeholder="Marca" />
          </div>
          <div>
            <label>Modelo</label>
            <input id="f-modelo" placeholder="Modelo" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>Cliente</label>
            <input id="f-cliente" placeholder="Nombre y apellido" />
          </div>
          <div>
            <label>Turno</label>
            <select id="f-turno">
              <option value="1">1</option>
              <option value="2">2</option>
            </select>
          </div>
        </div>
        <div>
          <label>Descripci√≥n</label>
          <textarea id="f-desc" rows="3" placeholder="Falla, notas, etc."></textarea>
        </div>
        <div class="row">
          <div>
            <label>Fecha de ingreso</label>
            <input id="f-ingreso" type="datetime-local" />
          </div>
          <div>
            <label>Fecha l√≠mite (entrega)</label>
            <input id="f-limite" type="datetime-local" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>Tipo de tarea</label>
            <select id="f-tipo"></select>
          </div>
          <div>
            <label>Color (auto por tipo, opcional override)</label>
            <input id="f-color" type="color" />
          </div>
        </div>
        <div>
          <label>T√©cnicos (borde por color)</label>
          <div id="techList"></div>
          <button id="btnAddTech" class="ghost" type="button">+ Agregar t√©cnico</button>
        </div>
        <div class="row">
          <div>
            <label>Columna</label>
            <select id="f-col">
              <option value="diagnostico">Diagn√≥stico</option>
              <option value="reparacion">Reparaci√≥n</option>
              <option value="listo">Listo</option>
            </select>
          </div>
          <div>
            <label>Vista compacta m√≥vil</label>
            <select id="f-compact">
              <option value="1">Compacta</option>
              <option value="0">Expandida</option>
            </select>
          </div>
        </div>
      </div>
      <footer>
        <button id="btnDelete" class="ghost danger">Eliminar</button>
        <div class="spacer"></div>
        <button id="btnCancel" class="ghost">Cancelar</button>
        <button id="btnSave" class="primary">Guardar</button>
      </footer>
    </aside>

    <!-- Drawer Ajustes -->
    <aside class="drawer" id="settings">
      <header><h1 style="font-size:15px; margin:0;">Ajustes</h1></header>
      <div class="content">
        <h3 style="margin:.2rem 0;">Colores por tipo de tarea</h3>
        <div id="tipoColors"></div>
        <button id="btnAddTipo" class="ghost">+ Agregar tipo</button>
        <hr style="border-color:#24314a;"/>
        <h3 style="margin:.2rem 0;">Tiempos</h3>
        <div class="row">
          <div><label>M√°x. horas para presupuestar</label><input id="st-budgetMaxH" type="number" min="1" step="1" /></div>
          <div><label>Min. horas para entrega (post-presupuesto)</label><input id="st-deliveryMinH" type="number" min="0" step="1" /></div>
          <div><label>M√°x. horas para entrega (post-presupuesto)</label><input id="st-deliveryMaxH" type="number" min="1" step="1" /></div>
        </div>
        <div class="row">
          <div><label>Umbral glow presupuesto (h antes)</label><input id="st-glowBudgetH" type="number" min="1" step="1" /></div>
          <div><label>Umbral glow entrega (h antes)</label><input id="st-glowDeliveryH" type="number" min="1" step="1" /></div>
        </div>
        <hr style="border-color:#24314a;"/>
        <h3 style="margin:.2rem 0;">T√©cnicos (paleta)</h3>
        <div id="settingsTech"></div>
        <button id="btnAddSettingsTech" class="ghost">+ Agregar t√©cnico</button>
      </div>
      <footer>
        <div class="spacer"></div>
        <button id="btnCloseSettings" class="ghost">Cerrar</button>
      </footer>
    </aside>

    <!-- Visor m√≥vil -->
    <div class="mobile-viewer" id="mv"><div class="mobile-sheet" id="mvSheet"></div></div>
  </div>

  <!-- L√≥gica -->
  <script defer src="cPanel.js"></script>
</body>
</html>
